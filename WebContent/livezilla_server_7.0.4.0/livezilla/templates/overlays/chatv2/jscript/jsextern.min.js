var lz_chat_full_load=true;var lz_chat_status_change=true;var lz_chat_status=-1;var lz_chat_last_message_received=null;var lz_chat_last_poster=null;var lz_operator=null;var lz_sound_player=null;var lz_external=new lz_chat_external_user();var lz_chat_data=new lz_chat_data_box();var lz_chat_change_data=false;var lz_chat_connecting=false;var lz_ticket=null;var lz_flood=false;var lz_timer_typing=null;var lz_timer_connecting=null;var lz_header_text="";var lz_sound_format="ogg";var lz_chat_id="";var lz_closed=false;var lz_popped_out=false;var lz_chat_waiting_posts_timer;var lz_chat_invite_timer=null;var lz_desired_operator=null;var lz_chat_talk_to_human=false;var lz_chat_scrolled=false;var lz_leave_chat=false;var lz_chat_human_available=false;var lz_chat_declined=false;var lz_chat_init_feedback=false;var lz_mode_show_options=false;var lz_chat_kb_last_search_phrase="";var lz_chat_kb_search_phrase="";var lz_chat_kb_sound_played=false;var lz_chat_et_attempt=false;var lz_default_meta=null;var lz_default_overflow="";var lz_chat_overlay_pointer=null;var lz_operator_typing=false;var lz_hide_widget_by_conf=false;var lz_first_call=true;var lz_mode_change_details=false;var lz_mode_phone_outbound=false;var lz_mode_phone_inbound=false;var lz_mode_chat_login=false;var lz_mode_ticket_feedback=false;OverlayChatWidgetV2.__Ratio=1;if(typeof lz_ovlel_rat!="undefined"){OverlayChatWidgetV2.__Ratio=lz_ovlel_rat}OverlayChatWidgetV2.__Size=Math.floor(48*OverlayChatWidgetV2.__Ratio);OverlayChatWidgetV2.__Border=Math.floor(2*OverlayChatWidgetV2.__Ratio);OverlayChatWidgetV2.__BorderWidth=1;OverlayChatWidgetV2.__Space=Math.floor(5*OverlayChatWidgetV2.__Ratio);OverlayChatWidgetV2.__Scale=".0"+Math.floor(14*OverlayChatWidgetV2.__Ratio).toString();OverlayChatWidgetV2.__ModeCombi=false;OverlayChatWidgetV2.__ModeSingle=false;OverlayChatWidgetV2.__ModeAPI=false;OverlayChatWidgetV2.__ModeFeedback=false;OverlayChatWidgetV2.__ModeBot=false;OverlayChatWidgetV2.__FormConfirmRequired=false;OverlayChatWidgetV2.__TicketRequired=false;OverlayChatWidgetV2.__LastChatId=0;OverlayChatWidgetV2.__ChatStarted=false;OverlayChatWidgetV2.__PostsNoticed=lz_is_mobile;OverlayChatWidgetV2.__LastPostReceived=null;OverlayChatWidgetV2.__IsPostStatusUpdate=false;OverlayChatWidgetV2.__IsWaitingForNotice=false;OverlayChatWidgetV2.ChatAvailable=null;document.addEventListener("mousemove",function(){if(typeof lz_session!="undefined"&&lz_session.OVLWMState=="1"){OverlayChatWidgetV2.__PostsNoticed=true}},false);function lz_chat_resize_area_int(a,c,b){}function lz_chat_resize_area(a,c,b){}function lz_chat_unset_focus(){try{if(lz_chat_data.InputFieldIndices!=null){if(document.getElementById("lz_chat_data_form").style.display!="none"){for(var c=0;c<lz_chat_data.InputFieldIndices.length;c++){var a=lz_chat_data.InputFieldIndices[c];if(document.getElementById("lz_form_"+a)!=null&&document.getElementById("lz_form_"+a).style.display!="none"){document.getElementsByName("form_"+a)[0].blur()}}}else{document.getElementById("lz_chat_text").blur()}}}catch(b){}}function lz_chat_set_focus(c){try{if(lz_mode_show_options){return}if(lz_chat_is_visible()&&lz_chat_data.InputFieldIndices!=null){var b=null;if(document.getElementById("lz_chat_data_form").style.display!="none"){for(var e=0;e<lz_chat_data.InputFieldIndices.length;e++){var a=lz_chat_data.InputFieldIndices[e];if(document.getElementById("lz_form_"+a)!=null&&document.getElementById("lz_form_"+a).style.display!="none"){if(document.getElementsByName("form_"+a)[0].value==""){b=document.getElementsByName("form_"+a)[0];break}}}}else{b=document.getElementById("lz_chat_text")}if(b!=null){lz_chat_set_focus_ctrl(b)}}}catch(d){}}function lz_chat_set_focus_ctrl(b){try{b.focus();var c=b.value;b.value="";b.value=c}catch(a){}}function lz_chat_scoll_down(){setTimeout("if(document.getElementById('lz_chat_content_box')!=null)document.getElementById('lz_chat_content_box').scrollTop = document.getElementById('lz_chat_content_box').scrollHeight;",100)}function lz_chat_pop_out(c,a){c=(typeof c!="undefined")?c:lz_session.OVLWMSElem;var b=lz_poll_server;var d=false;if(c=="knowledgebase"){b+="knowledgebase.php";b+="?etc="+lz_global_base64_url_encode(lz_color_secondary);b+="&linkid="+lz_global_base64_url_encode(lz_code_id);b+="&el="+lz_user_language;b+="&ckf="+lz_kb_root;d=true}else{b+="chat.php?v=2&linkid="+lz_global_base64_url_encode(lz_code_id);if(OverlayChatWidgetV2.__PublicGroupChat.length){b+="&pgc="+OverlayChatWidgetV2.__PublicGroupChat}}if(typeof a!="undefined"){b+=a}lz_chat_open_window(b,d)}function lz_chat_open_window(b,a){if(a){window.open(b,"LiveZilla")}else{var c=(OverlayChatWidgetV2.__PublicGroupChat.length)?Math.max(lz_window_width,600):lz_window_width;window.open(b,"LiveZilla","width="+c+",height="+lz_window_height+",left=50,top=50,resizable=yes,menubar=no,location=no,status=yes,slidebars=no")}}function lz_chat_switch_details(a){if(!a&&lz_mode_change_details){if(lz_session.OVLWMSElem=="chat"){lz_chat_change_data=true;lz_tracking_poll_server(1112)}}lz_mode_change_details=!lz_mode_change_details;lz_chat_update_ui_elements();lz_chat_set_focus(1)}function lz_chat_update_name(){var a=lz_chat_get_input_value(111);if(lz_global_trim(a)==""){a=lz_guest_name}for(var c=0;c<document.getElementById("lz_chat_content_box").getElementsByTagName("DIV").length;c++){var b=document.getElementById("lz_chat_content_box").getElementsByTagName("DIV")[c].getAttribute("data-my");if(b==1){if(document.getElementById("lz_chat_content_box").getElementsByTagName("DIV")[c].className.indexOf("lz_overlay_chat_message_name_external")!=-1){document.getElementById("lz_chat_content_box").getElementsByTagName("DIV")[c].getElementsByTagName("SPAN")[0].innerHTML=lz_global_htmlentities(a)}else{if(document.getElementById("lz_chat_content_box").getElementsByTagName("DIV")[c].className.indexOf("lz_overlay_chat_message_avatar_external")!=-1){document.getElementById("lz_chat_content_box").getElementsByTagName("DIV")[c].getElementsByTagName("DIV")[0].style.backgroundImage="url('"+lz_poll_server+"picture.php?name="+lz_global_base64_url_encode(a)+"&ebg="+lz_global_base64_url_encode(lz_color_primary)+"')"}}}}}function lz_chat_replace_time(b){for(var a=0;a<document.getElementById("lz_chat_content_box").getElementsByTagName("span").length;a++){if(document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].className=="lz_overlay_chat_message_time"){if(document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML.indexOf(":")==-1){if(!document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML.length&&lz_d(b)){document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML=b}document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML=lz_global_get_time(document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML)}}}}function lz_global_get_time(a){if(!a.toString().length||isNaN(a)){return""}a=parseInt(a)-lz_server_time_diff;var b=new Date(parseInt(a)*1000);var c=b.toLocaleTimeString();if(c=="Invalid Date"){return a}return c}function lz_chat_replace_icon(){for(var a=0;a<document.getElementById("lz_chat_content_box").getElementsByTagName("span").length;a++){if(document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].className=="lz_overlay_chat_message_change"){document.getElementById("lz_chat_content_box").getElementsByTagName("span")[a].innerHTML=lz_get_icon("","pencil","","")}}}function lz_chat_switch_options_table(a){lz_chat_switch_icon_toggle("lz_chat_switch_so",lz_session.OVLCSound==1);lz_chat_switch_icon_toggle("lz_chat_switch_tr",lz_session.TransFrom!="");lz_chat_update_transcript_ui();document.getElementById("lz_chat_options_table").style.display=(document.getElementById("lz_chat_options_table").style.display=="none"&&!a)?"":"none";document.getElementById("lz_chat_overlay_bottom").style.opacity=document.getElementById("lz_chat_content_box").style.opacity=(document.getElementById("lz_chat_options_table").style.display!="none")?0.2:1;document.getElementById("lz_cf_ec").style.display=(lz_chat_id.length&&(lz_chat_status==1||lz_chat_status==2))?"block":"none";OverlayChatWidgetV2.UpdateChatFunctions()}function lz_chat_set_translation(b,c,a){if(lz_overlay_chat!=null){if(a!=null){a=lz_global_base64_decode(a).toLowerCase();a=(a.length==0)?null:a}if(c!=null){c=lz_global_base64_decode(c).toLowerCase();c=(c.length==0)?null:"AUTO"}if(b!=null&&lz_session.TransSID!=b){if(b!=null){lz_session.TransSID=b}if(a!=null){lz_session.TransInto=a}if(c!=null){lz_session.TransFrom=c}else{lz_session.TransFrom=""}lz_session.Save()}lz_chat_update_translation_ui()}}function lz_chat_update_translation_ui(){var a=lz_session.TransFrom!="";lz_chat_switch_icon_toggle("lz_chat_switch_tr",a)}function lz_chat_update_transcript_ui(){var a=lz_session.Transcript==1&&lz_chat_get_input_value(112)!="";lz_chat_switch_icon_toggle("lz_chat_switch_et",a)}function lz_chat_switch_translation(){lz_session.TransFrom=(lz_session.TransFrom=="")?"AUTO":"";lz_session.Save();lz_chat_update_translation_ui()}function lz_chat_switch_transcript(c){var b=lz_chat_get_input_value(112)!="";if(lz_session.Transcript==1&&!b){lz_session.Transcript=0}var a=lz_session.Transcript;lz_session.Transcript=(lz_session.Transcript==1||!b)?0:1;lz_session.Save();lz_chat_update_transcript_ui();if(a==0&&lz_chat_get_input_value(112)==""&&!c){lz_chat_et_attempt=true;lz_chat_switch_options_table(true);lz_chat_switch_details(false);document.getElementsByName("form_112")[0].focus()}}function lz_chat_switch_sound(){lz_session.OVLCSound=lz_session.OVLCSound==1?0:1;lz_session.Save();lz_chat_switch_icon_toggle("lz_chat_switch_so",lz_session.OVLCSound==1)}function lz_chat_switch_icon_toggle(b,a){document.getElementById(b).getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(a?"toggle-on":"toggle-off"));document.getElementById(b).style.fill=(a)?lz_color_primary:"#bbb"}function lz_chat_fade_options(a){var b=parseInt((lz_overlay_chat_height-80)-parseInt(document.getElementById("lz_chat_overlay_options_box").style.height.replace("px","")));document.getElementById("lz_chat_overlay_options_box").style.top=(b/2)+"px";document.getElementById("lz_chat_overlay_options_frame").style.display=document.getElementById("lz_chat_overlay_options_box_bg").style.display=document.getElementById("lz_chat_overlay_options_box").style.display=(a)?"block":"none"}function lz_chat_init_data_change(b){var a=lz_chat_get_input_value(111);if(b==null){b=lz_chat_get_input_value(112)}if(lz_chat_data.InputFieldIndices!=null){lz_chat_get_input(111).ChangeDataTo=a;lz_chat_get_input(112).ChangeDataTo=b;lz_chat_save_input_value(112,b);lz_chat_save_input_value(111,a)}lz_chat_change_data=true}function lz_chat_play_sound(a){if(lz_session.OVLCSound==1){if(lz_sound_player==null){lz_sound_player=new Audio(lz_poll_server+"sound/"+a+"."+lz_sound_format)}lz_sound_player.play();if(OverlayChatWidgetV2.__ModeAPI){lz_chat_open()}}}function lz_chat_set_talk_to_human(a,b){lz_chat_input_bot_mode(false);lz_chat_input_bot_state(false);lz_chat_talk_to_human=a;if(b&&a&&!lz_chat_declined){lz_tracking_poll_server(1119)}}function lz_chat_input_bot_state(a){document.getElementById("lz_chat_text").style.display=(a)?"none":"";document.getElementById("lz_chat_bot_reply_loading").style.display=(!a||!OverlayChatWidgetV2.__ModeBot)?"none":"";if(OverlayChatWidgetV2.__ModeBot&&!a){setTimeout("lz_chat_set_focus(11);",200)}}function lz_chat_input_bot_mode(a){OverlayChatWidgetV2.__ModeBot=a}function lz_chat_message(d,a){if(!lz_chat_change_data&&lz_chat_status==0){lz_chat_change_data=true}lz_closed=false;var c=(d==null)?lz_global_trim(document.getElementById("lz_chat_text").value):d;if(c.length>0&&OverlayChatWidgetV2.__ModeBot){lz_chat_input_bot_state(true)}var g=(lz_session.TransInto!=""&&lz_session.TransInto!=null)?lz_session.TransInto:"";if(lz_tr_api_key!=""&&g!=""&&lz_session.TransFrom!=null&&lz_session.TransFrom!=""&&lz_session.TransFrom.toUpperCase()!=g.toUpperCase()&&d==null){var i=document.createElement("script");i.type="text/javascript";window.doneTranslateCallback=function b(l){if(l.data!=null){lz_chat_message(c,l.data.translations[0].translatedText);window.doneTranslateCallback=null}else{alert("Sorry, there was an error while trying to translate:\r\n"+JSON.stringify(l));lz_chat_message(c,null)}};var k=(lz_session.TransFrom!="AUTO")?"&source="+lz_session.TransFrom:"";i.src="https://www.googleapis.com/language/translate/v2?key="+lz_global_base64_decode(lz_tr_api_key)+"&format=html"+k+"&target="+g+"&callback=doneTranslateCallback&q="+c;document.getElementsByTagName("head")[0].appendChild(i);document.getElementById("lz_chat_text").value="";return false}if(c.length>0){if(document.getElementById("lz_chat_invite_id")!=null&&lz_chat_status==0){lz_chat_decline_request(lz_request_active=document.getElementById("lz_chat_invite_id").value,true,false,true);if(c.length>document.getElementsByName("form_114")[0].value.length){document.getElementsByName("form_114")[0].value=c}lz_chat_start();return false}var f="";var j=new lz_chat_post();if(a!=null){j.MessageTranslationText=a;f=lz_global_htmlentities(j.MessageTranslationText)+"<div class='lz_overlay_translation'>"+lz_global_htmlentities(c)+"</div>"}else{f=lz_global_htmlentities(c)}j.MessageText=c;j.MessageId=lz_global_microstamp();j.MessageTime=lz_global_timestamp();lz_external.MessagesSent[lz_external.MessagesSent.length]=j;document.getElementById("lz_chat_text").value="";if(lz_operator==null&&!OverlayChatWidgetV2.__PublicGroupChat.length){lz_chat_set_connecting(true,null,false)}var h=(lz_chat_last_poster!=lz_external.Id)?lz_global_base64_decode(lz_post_html):lz_global_base64_decode(lz_add_html);var e=(lz_chat_get_input_value(111).length==0)?lz_guest_name:lz_chat_get_input_value(111);h=h.replace("<!--message-->",f);h=h.replace("<!--server-->",lz_poll_server);h=h.replace("<!--ename-->",lz_global_base64_url_encode(e));h=h.replace("<!--time-->","");h=h.replace("<!--name-->",lz_global_htmlentities(e));h=h.replace(/<!--my-->/g,1);h=h.replace("<!--bgce-->",lz_global_base64_url_encode(lz_color_primary));lz_chat_switch_extern_typing(false);lz_chat_add_html_element(lz_global_base64_encode(h),false,null,null,lz_global_base64_encode(lz_external.Id),null);lz_tracking_poll_server(1114);lz_chat_set_focus(6)}return false}function lz_chat_set_host(b,g,a,h,e,f,d,c){if(lz_overlay_chat!=null){lz_chat_id=lz_global_base64_decode(g);if(lz_chat_id.length&&lz_chat_id>0){OverlayChatWidgetV2.__LastChatId=lz_chat_id}if(f!=null&&lz_session.TransInto==""){lz_session.TransInto=lz_global_base64_decode(f);lz_session.Save()}if(b!=null){lz_operator=new lz_chat_operator();lz_operator.Id=lz_global_base64_decode(b);lz_operator.Group=lz_global_base64_decode(a);lz_operator.Fullname=lz_global_base64_decode(c);lz_desired_operator=lz_global_base64_decode(e);lz_chat_set_group(lz_global_base64_encode(lz_operator.Group))}else{lz_desired_operator=null;lz_external.MessagesSent=[];lz_operator=null}OverlayChatWidgetV2.UpdateChatFunctions()}}function lz_chat_close(){OverlayChatWidgetV2.__ChatStarted=false;lz_leave_chat=true;lz_tracking_poll_server(1120)}function lz_chat_print(){var a=lz_poll_server+"print.php?c="+lz_global_base64_url_encode(OverlayChatWidgetV2.__LastChatId)+"&b="+lz_global_base64_url_encode(lz_session.UserId+"_OVL")+"&i="+lz_global_base64_url_encode(lz_session.UserId)+"&r="+Math.random().toString();lz_chat_open_window(a,false)}function lz_chat_set_typing(d,a){if(lz_overlay_chat!=null){if(lz_chat_connecting){if(!a&&lz_timer_connecting!=null){return}if(document.getElementById("lz_chat_overlay_info").innerHTML.length==0){document.getElementById("lz_chat_overlay_info").innerHTML=lz_text_connecting_info}else{document.getElementById("lz_chat_overlay_info").innerHTML=""}lz_timer_connecting=setTimeout("lz_chat_set_typing('',true);",700)}else{if(lz_timer_connecting!=null){clearTimeout(lz_timer_connecting)}lz_timer_connecting=null;if(lz_operator!=null&&d!=null&&!lz_operator_typing){var b=document.createElement("div");b.id="lz_chat_overlay_typing_post";var c=((lz_chat_last_poster!=lz_operator.Id)?lz_global_base64_decode(lz_post_html):lz_global_base64_decode(lz_add_html));c=c.replace("<!--message-->",'<div class="lz_anim_point_load" style="padding:5px 0 0 0 !important;"><span></span><span></span><span></span></div>');c=c.replace("<!--server-->",lz_poll_server);c=c.replace("name=<!--ename-->&ebg=<!--bgce-->","intid="+lz_global_base64_url_encode(lz_operator.Id));c=c.replace("<!--time-->","");c=c.replace("lz_overlay_chat_message_change","");c=c.replace("<!--name-->",lz_global_htmlentities(lz_operator.Fullname));b.innerHTML=c;lz_operator_typing=true;document.getElementById("lz_chat_content_inlay").appendChild(b);lz_chat_scoll_down()}else{if(d==null&&lz_operator_typing){lz_operator_typing=false;document.getElementById("lz_chat_content_inlay").removeChild(document.getElementById("lz_chat_overlay_typing_post"));delete document.getElementById("lz_chat_overlay_typing_post")}}}}}function lz_chat_switch_extern_typing(b){var a=(b!=lz_external.Typing);if(b){OverlayChatWidgetV2.__PostsNoticed=true;if(lz_timer_typing!=null){clearTimeout(lz_timer_typing)}lz_timer_typing=setTimeout("lz_chat_switch_extern_typing(false);",5000)}lz_external.Typing=b;if(a&&lz_operator!=null){lz_tracking_poll_server(1115)}}function lz_chat_show_waiting_message(a){if(lz_chat_status<2){lz_chat_add_html_element(a,false,null,null,"sys",null)}}function lz_chat_set_connecting(d,c,a,b,e){if(c!=null){lz_external.Id=c}if(d&&lz_chat_data.TimerWaiting==null&&b!=null){lz_chat_data.TimerWaiting=setTimeout("lz_chat_show_waiting_message('"+b+"');",e*1000)}else{if(!d&&lz_chat_data.TimerWaiting!=null){clearTimeout(lz_chat_data.TimerWaiting);lz_chat_data.TimerWaiting=null}}lz_chat_connecting=d;if(d){lz_chat_set_typing(null,false)}document.getElementById("lz_chat_members_box").style.bottom=document.getElementById("lz_chat_content_box").style.bottom=(lz_chat_connecting)?"102px":"80px";document.getElementById("lz_chat_overlay_loading_bar").style.display=(lz_chat_connecting)?"block":"none";document.getElementById("lz_chat_overlay_info").style.display=(lz_chat_connecting)?"block":"none"}function lz_chat_message_return(){lz_chat_update_ui_elements();lz_chat_set_focus(66)}function lz_kb_set_url(a){document.getElementById("lz_overlay_module_knowledgebase").style.display="block";var b=lz_poll_server+"knowledgebase.php?tops=MQ__&no-logo=MQ__&etc="+lz_global_base64_url_encode(lz_color_secondary)+"&el="+lz_user_language+"&ckf="+lz_kb_root;if(a!=""){b+="&search-for="+a}document.getElementById("lz_overlay_module_knowledgebase").getElementsByTagName("iframe")[0].src=b}function lz_chat_update_ui_elements(){lz_chat_set_input_fields();if(lz_chat_data.SelectedGroup==null){return}document.getElementById("lz_chat_overlay_data_form_ok_button").innerHTML=(lz_session.OVLWMSElem=="chat")?((lz_mode_change_details)?lz_text_save:lz_text_start_chat):(lz_session.OVLWMSElem=="phone")?lz_call_me:lz_text_leave_message;document.getElementById("lz_chat_data_header").innerHTML="<h2>"+((lz_session.OVLWMSElem=="chat")?((!lz_mode_change_details)?lz_text_start_chat:lz_text_change_details):(lz_session.OVLWMSElem=="phone")?lz_req_callback:lz_text_leave_message)+"</h2>";if(lz_session.OVLWMSElem=="chat"){if(lz_mode_change_details){document.getElementById("lz_chat_data_header_text").innerHTML=""}else{if(lz_chat_data.SelectedGroup.ChatInformation.length){document.getElementById("lz_chat_data_header_text").innerHTML=lz_chat_data.SelectedGroup.ChatInformation}else{document.getElementById("lz_chat_data_header_text").innerHTML=lz_text_chat_information}}}else{if(lz_session.OVLWMSElem=="phone"){if(lz_chat_data.SelectedGroup.CallMeBackInformation.length){document.getElementById("lz_chat_data_header_text").innerHTML=lz_chat_data.SelectedGroup.CallMeBackInformation}else{document.getElementById("lz_chat_data_header_text").innerHTML=lz_text_callback_information}}else{if(lz_session.OVLWMSElem=="ticket"){if(lz_chat_data.SelectedGroup.TicketInformation.length){document.getElementById("lz_chat_data_header_text").innerHTML=lz_chat_data.SelectedGroup.TicketInformation}else{document.getElementById("lz_chat_data_header_text").innerHTML=lz_text_ticket_information}}}}document.getElementById("lz_chat_overlay_ticket").style.display=(lz_mode_ticket_feedback)?"block":"none";document.getElementById("lz_overlay_module_chat").style.display=(lz_session.OVLWMSElem=="chat")?"block":"none";document.getElementById("lz_overlay_module_knowledgebase").style.visibility=(lz_session.OVLWMSElem=="knowledgebase")?"visible":"hidden";document.getElementById("lz_overlay_module_feedback").style.visibility=(OverlayChatWidgetV2.__ModeFeedback)?"visible":"hidden";document.getElementById("lz_chat_content_box").style.display=(lz_session.OVLWMSElem=="chat")?"block":"none";document.getElementById("lz_overlay_phone_inbound").style.display=(lz_mode_phone_inbound&&lz_session.OVLWMSElem=="phone")?"block":"none";if(lz_session.OVLWMSElem=="phone"&&lz_mode_phone_inbound){document.getElementById("lz_chat_data_form").style.top="180px";lz_add_class(document.getElementById("lz_chat_data_header"),"lz_chat_sub_header")}else{document.getElementById("lz_chat_data_form").style.top="6px";lz_remove_class(document.getElementById("lz_chat_data_header"),"lz_chat_sub_header")}if(lz_session.OVLWMSElem=="knowledgebase"){if(document.getElementById("lz_overlay_module_knowledgebase").getElementsByTagName("iframe")[0].src==""){lz_kb_set_url("")}}var c="block";var b=(OverlayChatWidgetV2.__ChatStarted||lz_chat_status>0);if(b){OverlayChatWidgetV2.__FormConfirmRequired=false}if(!lz_mode_change_details){if(document.getElementById("lz_chat_invite_id")!=null&&lz_session.OVLWMSElem=="chat"){c="none"}else{if(lz_mode_ticket_feedback||OverlayChatWidgetV2.__ModeFeedback){c="none"}else{if(lz_session.OVLWMSElem=="phone"&&!lz_mode_phone_outbound){c="none"}else{if(lz_session.OVLWMSElem=="knowledgebase"){c="none"}else{if(lz_session.OVLWMSElem=="chat"&&!OverlayChatWidgetV2.__FormConfirmRequired){if(lz_chat_status>0||b){c="none"}else{if(lz_check_missing_inputs(false,null)&&!OverlayChatWidgetV2.__PublicGroupChat.length){if(OverlayChatWidgetV2.ChatAvailable!==false){c="none"}}}}}}}}}if(c!="none"&&!b&&lz_session.OVLWMSElem=="chat"&&lz_chat_data.InputFieldIndices!=null&&lz_session.OVLWMState=="1"){OverlayChatWidgetV2.__FormConfirmRequired=true}try{if(c!="none"&&document.getElementById("lz_chat_text").value.length&&!document.getElementsByName("form_114")[0].value.length){document.getElementsByName("form_114")[0].value=document.getElementById("lz_chat_text").value;document.getElementById("lz_chat_text").value=""}else{if(lz_chat_status==0&&!OverlayChatWidgetV2.__ChatStarted&&c=="none"&&!document.getElementById("lz_chat_text").value.length&&document.getElementsByName("form_114")[0].value.length){document.getElementById("lz_chat_text").value=document.getElementsByName("form_114")[0].value;document.getElementsByName("form_114")[0].value=""}}}catch(a){}document.getElementById("lz_chat_data_form").style.display=c;document.getElementById("lz_chat_ticket_received").style.display=(lz_mode_ticket_feedback&&!lz_flood)?"":"none";document.getElementById("lz_chat_text").disabled=(document.getElementById("lz_chat_data_form").style.display!="none")}function lz_chat_set_members(a,e,b){document.getElementById("lz_chat_members_box").style.display=e?"block":"none";document.getElementById("lz_chat_content_box").style.left=!e?"1px":"201px";if(e){document.getElementById("lz_overlay_chat").style.width="600px";lz_overlay_chat_width=600}var h,f="",i="";for(var c in b){var g=(!b[c].op)?"name="+b[c].name:"intid="+lz_global_base64_url_encode(b[c].id);h="<div><span style=\"background-image: url('"+lz_poll_server+"picture.php?"+g+"');\"></span>"+lz_global_base64_url_decode(b[c].name)+"</div>";if(b[c].op){i+=h}else{f+=h}}if(lz_chat_status==2){OverlayChatWidgetV2.__PublicGroupChat=a}var d=(i.length)?i+"<hr>"+f:f;if(document.getElementById("lz_chat_members_box").innerHTML!=d){document.getElementById("lz_chat_members_box").innerHTML=d}lz_chat_set_element_width(e)}function lz_chat_data_form_result(){OverlayChatWidgetV2.__FormConfirmRequired=false;if(lz_mode_ticket_feedback){lz_load_inputs=true;lz_tracking_poll_server(1027);lz_mode_ticket_feedback=false;lz_chat_update_ui_elements();lz_chat_set_focus(7)}else{if(lz_mode_change_details){lz_chat_switch_details(false);if(lz_chat_et_attempt||lz_session.Transcript==1){lz_chat_et_attempt=false;lz_chat_switch_transcript(true)}}else{if(lz_session.OVLWMSElem=="chat"){lz_chat_start()}else{if(lz_session.OVLWMSElem=="ticket"){lz_chat_send_ticket()}else{if(lz_session.OVLWMSElem=="phone"){lz_chat_send_ticket(true)}}}}}}function lz_chat_start(){if(lz_chat_status>0||(lz_chat_status==0&&lz_check_missing_inputs(true,"lz_chat_start"))){lz_chat_change_data=true;lz_chat_loading(false);if(lz_chat_status==0){document.getElementById("lz_chat_text").value=document.getElementsByName("form_114")[0].value;lz_chat_message(null,null);document.getElementById("lz_chat_text").value=""}OverlayChatWidgetV2.__ChatStarted=true;lz_chat_set_group_info();lz_chat_update_ui_elements()}else{lz_chat_update_ui_elements();lz_chat_set_focus(8)}lz_tracking_poll_server(1153)}function lz_chat_poll_parameters(){var c="",a;if(lz_operator!=null){c+="&op="+lz_global_base64_url_encode(lz_operator.Id)}if(lz_external.Typing){c+="&typ=1"}if(lz_chat_full_load&&!lz_chat_declined){c+="&full=1"}if(lz_closed||lz_leave_chat){c+="&clch=MQ__"}if(lz_popped_out){c+="&po=MQ__"}if(lz_chat_init_feedback){lz_chat_init_feedback=false;c+="&ovlif=MQ__"}if(lz_chat_kb_search_phrase!=""){c+="&skb="+lz_global_base64_url_encode(lz_chat_kb_search_phrase)}if(lz_chat_status_change){c+="&sc=1"}if(lz_chat_talk_to_human&&!lz_chat_declined){c+="&tth=MQ__"}if(lz_force_monitoring){c+="&fm=MQ__"}if(lz_chat_data.SelectedGroup!=null){c+="&eg="+lz_global_base64_url_encode(lz_chat_data.SelectedGroup.Id)}if(OverlayChatWidgetV2.__ChatStarted&&lz_chat_status==0){lz_chat_change_data=true}if(lz_chat_change_data&&lz_chat_data.InputFieldValues!=null){for(a=0;a<lz_chat_data.InputFieldValues.length;a++){if(lz_chat_data.InputFieldValues[a].Type!="File"&&lz_chat_data.InputFieldValues[a].Value!=""){c+="&f"+lz_chat_data.InputFieldValues[a].Index+"="+lz_global_base64_url_encode(lz_chat_data.InputFieldValues[a].Value)}}if(lz_session.OVLWMSElem=="chat"){c+="&tc="+lz_global_base64_url_encode(lz_session.Transcript.toString())}lz_chat_change_data=false}if(lz_ticket!=null){c+="&tid="+lz_global_base64_url_encode(lz_ticket);c+="&cmb="+lz_global_base64_url_encode(lz_session.OVLWMSElem=="phone"?"1":"0");lz_ticket=null}lz_chat_status_change=false;if(OverlayChatWidgetV2.__LastPostReceived!=null){c+="&lpr="+lz_global_base64_url_encode(OverlayChatWidgetV2.__LastPostReceived);if(OverlayChatWidgetV2.__IsPostStatusUpdate||(OverlayChatWidgetV2.__IsWaitingForNotice&&OverlayChatWidgetV2.__PostsNoticed)){c+="&lps="+lz_global_base64_url_encode(OverlayChatWidgetV2.__PostsNoticed?"2":"1");OverlayChatWidgetV2.__IsPostStatusUpdate=false;OverlayChatWidgetV2.__IsWaitingForNotice=!OverlayChatWidgetV2.__PostsNoticed}}if(lz_chat_last_message_received!=null){c+="&lmr="+lz_global_base64_url_encode(lz_chat_last_message_received)}if(lz_chat_last_poster!=null){c+="&lp="+lz_global_base64_url_encode(lz_chat_last_poster)}if(lz_desired_operator!=null){c+="&intid="+lz_global_base64_url_encode(lz_desired_operator)}var b=0;for(a=0;a<lz_external.MessagesSent.length;a++){if(!lz_external.MessagesSent[a].Received){c+="&mi"+b.toString()+"="+lz_global_base64_url_encode(lz_external.MessagesSent[a].MessageId)+"&mp"+(b).toString()+"="+lz_global_base64_url_encode(lz_external.MessagesSent[a].MessageText.substr(0,600))+"&mpt"+(b).toString()+"="+lz_global_base64_url_encode(lz_external.MessagesSent[a].MessageTranslationText.substr(0,600))+"&mpti"+(b++).toString()+"="+lz_global_base64_url_encode((lz_session.TransFrom!=null)?lz_session.TransFrom:"")}}if(OverlayChatWidgetV2.__PublicGroupChat.length){c+="&pgc="+OverlayChatWidgetV2.__PublicGroupChat}return c}function lz_chat_release_post(b,c){for(var a in lz_external.MessagesSent){if(lz_external.MessagesSent[a].MessageId==b){lz_external.MessagesSent[a].Received=true}}lz_chat_replace_time(c)}function lz_chat_update_waiting_posts(a){if(!lz_chats_external&&lz_overlay_wm!=null&&lz_chat_get_wm_element("chat")!=null){if(a>-1&&lz_session.OVLCWM!=a){lz_session.OVLCWM=a;lz_session.Save()}document.getElementById("livezilla_wm_c_chat").style.display=(a>0)?"table-cell":"none";document.getElementById("livezilla_wm_c_chat").innerHTML=lz_session.OVLCWM}}function lz_chat_update_kb_counter(a){if(document.getElementById("livezilla_wm_c_knowledgebase")!==null){document.getElementById("livezilla_wm_c_knowledgebase").style.display=(a>0)?"table-cell":"none";document.getElementById("livezilla_wm_c_knowledgebase").innerHTML=a}}function lz_chat_init_search_kb(){var a=lz_chat_get_input_value(114);if(lz_session.KBS!=1||a.length<12){return}if(a!=lz_chat_kb_last_search_phrase){lz_shared_kb_last_search_time=lz_global_timestamp();lz_chat_kb_last_search_phrase=lz_chat_kb_search_phrase=a;lz_tracking_poll_server(1241)}}function lz_chat_search_result(a,b){lz_chat_kb_search_phrase="";document.getElementById("lz_chat_kb_match_info").style.display=(b>0)?"block":"none";if(b>0&&!lz_chat_kb_sound_played){lz_chat_play_sound("message");lz_chat_kb_sound_played=true}lz_kb_set_url(document.getElementsByName("form_114")[0].value);lz_chat_update_kb_counter(b)}function lz_global_replace_smilies(d){if(lz_chat_data.SelectedGroup!=null&&lz_chat_data.SelectedGroup.ChatFunctions!=null&&lz_chat_data.SelectedGroup.ChatFunctions[0]=="0"){return d}var b=[/:-\)/g,/::smile/g,/:\)/g,/:-\(/g,/::sad/g,/:\(/g,/:-]/g,/::lol/g,/;-\)/g,/::wink/g,/;\)/g,/:'-\(/g,/::cry/g,/:-O/g,/::shocked/g,/:-\\\\/g,/::sick/g,/:-p/g,/::tongue/g,/:-P/g,/:\?/g,/::question/g,/8-\)/g,/::cool/g,/zzZZ/g,/::sleep/g,/:-\|/g,/::neutral/g];var a=["smile","smile","smile","sad","sad","sad","lol","lol","wink","wink","wink","cry","cry","shocked","shocked","sick","sick","tongue","tongue","tongue","question","question","cool","cool","sleep","sleep","neutral","neutral"];for(var c=0;c<b.length;c++){d=d.replace(b[c]," <img border=0 src='"+lz_poll_server+"images/smilies/"+a[c]+".gif'> ")}return d}function lz_chat_add_html_element(e,d,g,c,h,f,a){OverlayChatWidgetV2.__PostsNoticed=lz_is_mobile;if(a!=null){lz_chat_update_waiting_posts((a==-1)?0:(lz_session.OVLCWM+parseInt(a)))}if(e!=null){if(lz_chat_full_load&&d){lz_chat_full_load=false}if(f!=null&&lz_global_base64_decode(f)!=lz_chat_last_poster&&lz_chat_last_poster!=null){lz_tracking_poll_server(1117);return}if(g!=null&&OverlayChatWidgetV2.__LastPostReceived!=lz_global_base64_decode(g)){OverlayChatWidgetV2.__LastPostReceived=lz_global_base64_decode(g);OverlayChatWidgetV2.__IsPostStatusUpdate=true}if(c!=null&&lz_chat_last_message_received!=lz_global_base64_decode(c)){lz_chat_last_message_received=lz_global_base64_decode(c)}if(h!=null&&e!=null&&lz_chat_last_poster!=lz_global_base64_decode(h)){lz_chat_last_poster=lz_global_base64_decode(h)}var b=document.createElement("div");document.getElementById("lz_chat_content_inlay").appendChild(b);b.innerHTML=lz_global_replace_smilies(lz_global_base64_decode(e),true);lz_update_chat_area();lz_chat_replace_time();lz_chat_replace_icon();if(lz_operator_typing){document.getElementById("lz_chat_content_inlay").appendChild(document.getElementById("lz_chat_overlay_typing_post"))}}}function lz_update_chat_area(){lz_chat_set_element_width();lz_chat_scoll_down()}function lz_chat_post(){this.MessageText="";this.MessageTranslationText="";this.MessageId="";this.Received=false}function lz_chat_operator(){this.Id="";this.Fullname="";this.Group="";this.Language="en"}function lz_chat_external_user(){this.Id="";this.Username="";this.Email="";this.Company="";this.Question="";this.Typing=false;this.MessagesSent=[]}function lz_chat_detect_sound(){var a=document.createElement("audio");var b=!!(a.canPlayType&&a.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""));lz_sound_format=(b)?"ogg":"mp3"}function lz_chat_decline_request(c,a,e,b){if(b==null){b=false}var d=document.getElementById(c);if(d!=null&&d.style.display!="none"){if(!a){lz_request_active=c;lz_tracking_action_result("chat_request",b,false,lz_chat_poll_parameters())}d.parentNode.removeChild(d);lz_chat_set_element_width();if(!b){lz_chat_hide()}}}function lz_chat_mail_callback(a){lz_chat_loading(false);lz_mode_ticket_feedback=true;document.getElementById("lz_chat_ticket_received").style.display=(a)?"":"none";document.getElementById("lz_chat_ticket_flood").style.display=(!a)?"":"none";if(a){document.getElementsByName("form_114")[0].value="";lz_ticket=null}else{lz_flood=true}lz_chat_update_ui_elements()}function lz_chat_send_ticket(){lz_chat_save_input_value(114,document.getElementsByName("form_114")[0].value);if(lz_check_missing_inputs(true,"lz_chat_send_ticket")){lz_chat_loading(true);lz_ticket=lz_global_timestamp();lz_chat_change_data=true;setTimeout("lz_tracking_poll_server(1116);",500)}}function lz_chat_loading(a){var b=(a!=(document.getElementById("lz_chat_overlay_loading").style.display=="block"));document.getElementById("lz_chat_overlay_loading").style.display=(a)?"block":"none";if(b){if(a){lz_chat_unset_focus()}else{lz_chat_set_focus(43)}}}function lz_check_missing_inputs(h,k){if(lz_chat_data.InputFieldIndices==null){return false}var j,o=false,c=false;var b=(lz_session.OVLWMSElem=="chat")?lz_chat_data.SelectedGroup.ChatInputsMandatory:lz_chat_data.SelectedGroup.TicketInputsMandatory;var e=(lz_session.OVLWMSElem=="chat")?lz_chat_data.SelectedGroup.ChatInputsHidden:lz_chat_data.SelectedGroup.TicketInputsHidden;var d=lz_is_placeholder_support();for(var f=0;f<lz_chat_data.InputFieldIndices.length;f++){var n=lz_chat_data.InputFieldIndices[f];if(n==115||(document.getElementById("files_"+n)==null&&lz_chat_data.InputFieldValues[f].Type=="File")){continue}if(lz_chat_data.InputFieldValues[f].Active||(n==116&&lz_session.OVLWMSElem=="phone")){if(lz_chat_data.InputFieldValues[f].Type=="File"){j=document.getElementById("files_"+n).children.length>0||lz_session.OVLWMSElem=="chat"}else{j=(lz_chat_data.InputFieldValues[f].Type=="CheckBox")?document.getElementsByName("form_"+n)[0].checked:lz_global_trim(document.getElementsByName("form_"+n)[0].value).length>0}if(!d&&j&&lz_chat_data.InputFieldValues[f].Type!="CheckBox"&&lz_global_trim(document.getElementsByName("form_"+n)[0].value)==document.getElementById("lz_form_ph_"+n).value){j=false}var l=(lz_array_indexOf(e,n)==-1&&(lz_array_indexOf(b,n)!=-1||lz_chat_data.InputFieldValues[f].Validation));if(l&&document.getElementById("lz_form_"+n).style.display=="none"){l=false}var a=(n==116&&lz_session.OVLWMSElem=="phone");var g=(n==114&&k=="lz_chat_send_ticket");if(lz_chat_data.InputFieldValues[f].Validation&&!lz_chat_data.InputFieldValues[f].Validated&&lz_array_indexOf(e,lz_chat_data.InputFieldIndices[f])==-1){c=true}if((l||a||g)&&(!j)){if(h){document.getElementById("lz_form_mandatory_"+n).className="lz_input_icon lz_required";document.getElementById("lz_form_mandatory_"+n).style.display="block"}o=true}else{if(h){if(document.getElementById("lz_form_info_"+n).innerHTML.length>0){document.getElementById("lz_form_mandatory_"+n).className="lz_input_icon lz_info";document.getElementById("lz_form_mandatory_"+n).style.display="block"}else{document.getElementById("lz_form_mandatory_"+n).style.display="none"}}}}}var m=lz_chat_data.Groups.GetGroupById(document.getElementById("lz_form_groups").value);document.getElementById("lz_form_mandatory_group").className="lz_input_icon lz_required";document.getElementById("lz_form_mandatory_group").style.display=(m==null&&h)?"":"none";if(m==null){o=true}if(o&&!c){return false}else{if(!o&&k!=null){return lz_validate_inputs(k,e)}else{return !c&&!o}}}function lz_validate_inputs(c,a){var b;lz_chat_data.ValidationRequired=false;for(b=0;b<lz_chat_data.InputFieldValues.length;b++){lz_chat_data.InputFieldValues[b].SetStatus(null,false)}for(b=0;b<lz_chat_data.InputFieldValues.length;b++){if(lz_chat_data.InputFieldValues[b].Active&&lz_chat_data.InputFieldValues[b].Validation&&!lz_chat_data.InputFieldValues[b].Validated&&lz_array_indexOf(a,lz_chat_data.InputFieldIndices[b])==-1){lz_chat_data.ValidationRequired=(lz_chat_data.InputFieldValues[b].Type!="CheckBox");lz_chat_data.InputFieldValues[b].ValidationResult=null;lz_chat_loading(true);if(lz_chat_data.ValidationRequired){lz_chat_data.InputFieldValues[b].Validate(c);return false}}}return true}function lz_validate_input_result(_result,_id){var failed=false;for(var i=0;i<lz_chat_data.InputFieldValues.length;i++){if(lz_chat_data.InputFieldValues[i].Index!=_id||lz_chat_data.InputFieldValues[i].Validated){continue}if(lz_chat_data.InputFieldValues[i].ValidationResult!=null){continue}var cinput=lz_chat_data.InputFieldValues[i];cinput.Validated=true;cinput.ValidationResult=_result;clearTimeout(cinput.ValidationTimeoutObject);if(_result===false){failed=true}else{if(_result===-1){if(cinput.ValidationContinueOnTimeout){cinput.ValidationResult=true;eval(cinput.ValidationContinueAt);return}else{failed=true}}else{if(_result===true){eval(cinput.ValidationContinueAt);return}}}if(failed){setTimeout("lz_chat_loading(false);",500);setTimeout("document.getElementById('lz_form_mandatory_"+cinput.Index.toString()+"').style.display = '';",501);setTimeout("document.getElementById('lz_form_mandatory_"+cinput.Index.toString()+"').className = 'lz_input_icon lz_required lz_anim_hs';",700);cinput.Validated=false;for(var x=0;x<lz_chat_data.InputFieldValues.length;x++){lz_chat_data.InputFieldValues[x].Validated=false}return}}}function lz_chat_scroll(){if(!lz_chat_scrolled){lz_chat_scrolled=true;lz_chat_set_element_width();lz_chat_scoll_down()}}function lz_chat_set_element_width(){var b=(lz_overlay_chat.m_FixedMode||lz_overlay_chat.m_FullScreenMode)?lz_global_get_window_width(true):lz_overlay_chat_width;if(document.getElementById("lz_chat_members_box").style.display=="block"){b-=200}for(var a=0;a<document.getElementById("lz_chat_content_box").childNodes.length;a++){if(document.getElementById("lz_chat_content_box").childNodes[a].tagName.toLowerCase()=="div"){document.getElementById("lz_chat_content_box").childNodes[a].style.width=(lz_chat_scrolled||document.getElementById("lz_chat_content_box").scrollHeight>document.getElementById("lz_chat_content_box").clientHeight)?(b-18+"px"):(b-3+"px")}}}function lz_chat_set_groups(e,b,a,c){lz_chat_data.ForceGroupSelect=lz_force_group_select;if(lz_chat_data.Groups==null){lz_chat_data.Groups=new lz_group_list(document,document.getElementById("lz_form_groups"))}lz_chat_data.Groups.StatusIcon=false;lz_chat_data.Groups.CreateHeader(lz_text_please_select);lz_chat_data.Groups.Update(b);var d=lz_global_base64_url_decode(c);if(d.length>0&&!(lz_chat_data.ForceGroupSelect&&!lz_chat_data.ForceSelectMade)){lz_chat_set_group(lz_global_base64_encode(d))}lz_chat_change_group(document.getElementById("lz_form_groups"),false)}function lz_chat_set_group(a){if(lz_chat_data.Groups!=null){lz_chat_data.SelectedGroup=lz_chat_data.Groups.GetGroupById(lz_global_base64_decode(a));if(lz_chat_data.SelectedGroup!=null){lz_chat_data.Groups.SelectGroupById(lz_chat_data.SelectedGroup.Id,document.getElementById("lz_form_groups"));lz_chat_set_group_info()}OverlayChatWidgetV2.UpdateChatFunctions()}}function lz_chat_set_group_info(){var a=null;if(lz_chat_data.SelectedGroup!=null){a=lz_chat_data.SelectedGroup;if(!OverlayChatWidgetV2.__PublicGroupChat.length){document.getElementById("lz_chat_operator_groupname").innerHTML=a.Description}else{document.getElementById("lz_chat_operator_groupname").innerHTML=""}document.getElementById("lz_chat_operator_fullname").innerHTML=(lz_operator!=null&&!OverlayChatWidgetV2.__PublicGroupChat.length)?lz_operator.Fullname:"";document.getElementById("lz_chat_operator_fullname").style.display=(lz_operator!=null)?"inline-block":"none"}}function lz_chat_pre_change_group(a){lz_chat_data.ForceSelectInit=true}function lz_chat_change_group(d){if(lz_chat_data.ForceGroupSelect&&!lz_chat_data.ForceSelectMade&&d.selectedIndex==d.childNodes.length-1){return}if(lz_chat_data.ForceGroupSelect&&lz_chat_data.ForceSelectInit&&!lz_chat_data.ForceSelectMade){lz_chat_data.ForceSelectMade=true;d.removeChild(lz_chat_data.Groups.ForceSelectOption);lz_chat_set_input_fields()}var c=(lz_chat_data.SelectedGroup!=null)?lz_chat_data.SelectedGroup.Id+lz_chat_data.SelectedGroup.Amount:"";lz_chat_data.SelectedGroup=lz_chat_data.Groups.GetGroupById(d.value);if(lz_chat_data.SelectedGroup==null){var a=d.selectedIndex;var b=false;while(lz_chat_data.SelectedGroup==null){a++;if(a==d.childNodes.length){if(!b){a=0;b=true}else{break}}lz_chat_data.SelectedGroup=lz_chat_data.Groups.GetGroupById(d.childNodes[a].value)}}var e=(lz_chat_data.SelectedGroup!=null)?lz_chat_data.SelectedGroup.Id+lz_chat_data.SelectedGroup.Amount:"";if(lz_chat_data.SelectedGroup!=null){if(d.length>a){d.selectedIndex=a}if(c!=e){lz_chat_update_ui_elements()}d.style.color=d.childNodes[d.selectedIndex].style.color;d.style.background=d.childNodes[d.selectedIndex].style.background}}function lz_chat_data_box(){this.InputFieldIndices=null;this.InputFieldValues=null;this.InputFieldFiles=null;this.SelectedGroup=null;this.Groups=null;this.ForceSelectInit=false;this.ForceSelectMade=false;this.ForceGroupSelect=false;this.QueueMessageAppended=false;this.TimerWaiting=null}function lz_chat_show_info_box(b,a){var c=document.getElementById("lz_form_info_"+b);c.style.display=(a&&c.style.display!="block")?"block":"none";c.style.right="30px"}function lz_chat_set_input_fields(){try{if(lz_chat_data.InputFieldIndices!=null&&lz_chat_data.SelectedGroup!=null){if(lz_first_call){lz_chat_loading(false);lz_first_call=false}var c=false;var h=(lz_session.OVLWMSElem=="chat");var f=(h)?lz_chat_data.SelectedGroup.ChatInputsHidden:lz_chat_data.SelectedGroup.TicketInputsHidden;var d=(h)?lz_chat_data.SelectedGroup.ChatInputsMandatory:lz_chat_data.SelectedGroup.TicketInputsMandatory;var b=(lz_session.OVLWMSElem!="ticket");var e=lz_is_placeholder_support();OverlayChatWidgetV2.ValidateMode();for(var g=0;g<lz_chat_data.InputFieldIndices.length;g++){var l=lz_chat_data.InputFieldIndices[g];try{if(document.getElementById("lz_form_active_"+l)==null){continue}if(document.getElementById("lz_form_active_"+l).value=="true"||(lz_session.OVLWMSElem=="phone"&&l==116)){c=((lz_array_indexOf(f,l)>-1)||(lz_chat_data.ForceGroupSelect&&!lz_chat_data.ForceSelectMade&&lz_chat_data.InputFieldValues[g].IsHiddenGeneral(lz_chat_data.Groups.Groups,h)));if(OverlayChatWidgetV2.__PublicGroupChat.length&&l==114){c=true}if(h&&lz_mode_change_details&&l==114){c=true}if(h&&lz_chat_data.InputFieldValues[g].Type=="File"){c=true}if(lz_session.OVLWMSElem=="phone"&&l!=111&&l!=114&&l!=116){c=true}if(lz_session.OVLWMSElem=="phone"&&l==116){c=false}if(l==115){c=true}document.getElementById("lz_form_"+l).className=(l==116&&lz_session.OVLWMSElem=="phone")?"lz_input lz_input_com":document.getElementById("lz_form_"+l).className;document.getElementById("lz_form_"+l).style.display=(c)?"none":"";document.getElementById("lz_form_"+l).style.display=(l==116&&lz_session.OVLWMSElem=="phone")?"":document.getElementById("lz_form_"+l).style.display;if(document.getElementById("lz_form_info_"+l).innerHTML.length>0&&!lz_mode_change_details){if(document.getElementById("lz_form_mandatory_"+l).className.indexOf("lz_required")==-1){document.getElementById("lz_form_mandatory_"+l).className="lz_input_icon lz_info"}document.getElementById("lz_form_mandatory_"+l).style.cursor="pointer";document.getElementById("lz_form_mandatory_"+l).style.display="";document.getElementById("lz_form_mandatory_"+l).onmouseover=new Function("lz_chat_show_info_box('"+l.toString()+"',true);");document.getElementById("lz_form_mandatory_"+l).onmouseout=new Function("lz_chat_show_info_box('"+l.toString()+"',false);");document.getElementById("lz_form_mandatory_"+l).onclick=new Function("lz_chat_show_info_box('"+l.toString()+"',true);");document.getElementById("lz_form_info_"+l).onclick=new Function("lz_chat_show_info_box('"+l.toString()+"',false);")}else{if(lz_mode_change_details){document.getElementById("lz_form_mandatory_"+l).style.display="none"}}document.getElementsByName("form_"+l)[0].disabled=lz_mode_change_details&&lz_chat_data.InputFieldValues[g].Validation}else{document.getElementById("lz_form_"+l).style.display="none"}if(lz_chat_data.InputFieldValues[g].Active){if(lz_array_indexOf(d,l)!=-1||(lz_chat_data.InputFieldValues[g].Validation&&lz_array_indexOf(f,l)==-1)){if(!lz_mode_chat_login){lz_mode_chat_login=lz_chat_human_available&&!OverlayChatWidgetV2.__ModeBot}b=true}if(!e&&(lz_chat_data.InputFieldValues[g].Type=="Text"||lz_chat_data.InputFieldValues[g].Type=="TextArea")){if(document.getElementsByName("form_"+l)[0].value==""){document.getElementsByName("form_"+l)[0].value=document.getElementById("lz_form_ph_"+l).value;document.getElementsByName("form_"+l)[0].style.color="#BBB"}document.getElementsByName("form_"+l)[0].onfocus=new Function("if (this.value == '"+document.getElementById("lz_form_ph_"+l).value+"') {this.value = ''; this.style.color='#333'}");document.getElementsByName("form_"+l)[0].onblur=new Function("if (this.value == '') {this.value = '"+document.getElementById("lz_form_ph_"+l).value+"'; this.style.color='#BBB'}")}if(lz_chat_data.InputFieldValues[g].Type=="File"){document.getElementById("files_"+l).style.display="none";document.getElementById("files_"+l).innerHTML="";if(lz_chat_data.InputFieldFiles[g].length){document.getElementById("files_"+l).style.display="block";for(var k in lz_chat_data.InputFieldFiles[g]){document.getElementById("files_"+l).innerHTML+='<div class="lz_form_file_box"><span onclick="if(event.stopPropagation){event.stopPropagation();}event.cancelBubble=true;" class="lz_form_file_item">'+lz_global_htmlentities(lz_global_base64_decode(lz_chat_data.InputFieldFiles[g][k][1]).substring(0,30))+"</span><span onclick=\"lz_chat_remove_att('"+lz_chat_data.InputFieldFiles[g][k][0]+'\');if(event.stopPropagation){event.stopPropagation();}event.cancelBubble=true;" class="lz_form_file_item lz_form_file_remove">X</span><div>'}}}}}catch(j){console.log(j)}}var a=((lz_session.OVLWMSElem=="chat"&&(lz_mode_change_details||lz_hide_group_chat))||((lz_session.OVLWMSElem=="ticket"||lz_session.OVLWMSElem=="phone")&&lz_hide_group_ticket));document.getElementById("lz_group_selection_box").style.display=a?"none":""}else{if(lz_first_call){lz_chat_loading(true)}}if(!lz_mode_chat_login&&lz_force_group_select){lz_mode_chat_login=true}}catch(j){console.log(j)}}function lz_chat_switch_options(c,h,d,f){var g=["fu"];if(!h){lz_chat_unset_focus();var b=document.getElementById("lz_chat_overlay_options_box").style.display=="none";for(var e=0;e<g.length;e++){document.getElementById("lz_chat_overlay_option_function_"+g[e]).style.display=(c==g[e])?"block":"none"}if(b){lz_chat_option_function=c;if(c=="fu"){var a=(d=="ticket")?"uid="+lz_global_base64_url_encode(lz_session.UserId)+"&bid="+lz_global_base64_url_encode(lz_session.BrowserId):"cid="+lz_global_base64_url_encode(lz_chat_id)+"&wt=ovlv2";if(typeof f!="undefined"){a+="&find="+lz_global_base64_url_encode(f)}a+="&etc="+lz_global_base64_url_encode(lz_color_primary);if(document.getElementById("lz_chat_overlay_file_upload_frame").src!=lz_poll_server+"upload.php?"+a){document.getElementById("lz_chat_overlay_file_upload_frame").src=lz_poll_server+"upload.php?"+a}}}else{if(c=="fu"){lz_load_inputs=true;lz_tracking_poll_server(1021)}lz_session.Save()}lz_mode_show_options=b;lz_chat_fade_options(b)}else{lz_chat_fade_options(false)}}function lz_chat_remove_att(a){lz_remove_att=a;lz_tracking_poll_server(1412)}function lz_chat_load_input_values(a){for(var c=0;c<lz_chat_data.InputFieldIndices.length;c++){var b=lz_chat_data.InputFieldIndices[c];if(document.getElementById("lz_form_"+b)!=null){if(lz_chat_data.InputFieldValues[c].Type=="File"){continue}if(document.getElementsByName("form_"+b)[0].tagName.toUpperCase()=="SELECT"){document.getElementsByName("form_"+b)[0].selectedIndex=parseInt(lz_chat_data.InputFieldValues[c].Value)}else{if(document.getElementsByName("form_"+b)[0].type.toUpperCase()=="CHECKBOX"){if(document.getElementsByName("form_"+b)[0].value==""||a){document.getElementsByName("form_"+b)[0].value=lz_chat_data.InputFieldValues[c].Value}document.getElementsByName("form_"+b)[0].checked=(parseInt(lz_chat_data.InputFieldValues[c].Value)==1)}else{if(document.getElementsByName("form_"+b)[0].value==""||a){document.getElementsByName("form_"+b)[0].value=lz_global_trim(lz_chat_data.InputFieldValues[c].Value)}}}}}}function lz_chat_show_queue_position(a,c,b){if(!lz_chat_data.QueueMessageAppended){var d=lz_global_base64_decode(b).replace("<!--queue_position-->","<span id='lz_chat_queue_position' style='color:"+lz_color_secondary+"'>-1</span>");d=d.replace("<!--queue_waiting_time-->","<span id='lz_chat_queue_waiting_time' style='color:"+lz_color_secondary+"'>-1</span>");lz_chat_add_html_element(lz_global_base64_encode(d),false,null,null,null,null);lz_chat_data.QueueMessageAppended=true;lz_chat_last_poster=null}if(document.getElementById("lz_chat_queue_position")){var f=parseInt(document.getElementById("lz_chat_queue_position").innerHTML);var e=parseInt(document.getElementById("lz_chat_queue_waiting_time").innerHTML);if(f==-1||(a>0&&a<=f)){document.getElementById("lz_chat_queue_position").innerHTML=a}if(e==-1||(c>0&&c<=e)){document.getElementById("lz_chat_queue_waiting_time").innerHTML=c}}}function lz_chat_show_feedback(){var a="cid="+lz_global_base64_url_encode(OverlayChatWidgetV2.__LastChatId)+"&wt=ovlv2&etc="+lz_global_base64_url_encode(lz_color_primary)+"&el="+lz_user_language;var b=document.getElementById("lz_overlay_module_feedback_content").getElementsByTagName("iframe")[0];if(b.src!=lz_poll_server+"feedback.php?"+a){document.getElementById("lz_overlay_module_feedback").style.display="block";b.src=lz_poll_server+"feedback.php?"+a}OverlayChatWidgetV2.__ModeFeedback=!OverlayChatWidgetV2.__ModeFeedback;lz_chat_update_ui_elements()}function lz_chat_kb_deactivate(b,a){lz_chat_search_result(0);if(b){lz_session.KBS=0;lz_session.Save()}if(a){if(lz_chat_get_wm_element("knowledgebase")!=null){OverlayChatWidgetV2.SetMode("knowledgebase",true)}else{lz_chat_pop_out("knowledgebase","&eq="+lz_global_base64_encode(document.getElementsByName("form_114")[0].value))}}}function lz_chat_open(a){if(lz_chats_external){lz_chat_pop_out("chat")}else{if(lz_chat_get_wm_element("chat")!=null){lz_session.OVLWMState="1";OverlayChatWidgetV2.SetMode("chat",false);if(a){lz_chat_play_sound("wind")}}else{OverlayChatWidgetV2.SetMode(OverlayChatWidgetV2.GetAutoMode(),true)}}}function lz_chat_show(a){lz_chat_open(a)}function lz_chat_hide(){lz_session.OVLWMState="0";OverlayChatWidgetV2.SetMode(OverlayChatWidgetV2.GetAutoMode())}function lz_chat_overlay_set_mode(b,a){OverlayChatWidgetV2.SetMode(b,a)}function lz_chat_is_visible(){return lz_session.OVLWMState=="1"&&lz_session.OVLWMSElem!=""&&lz_session.OVLWMSElem!="wm"}function lz_chat_set_zoom(a,b){if(!lz_fixed_mode_possible()){return}if(b){lz_chat_restore_meta();lz_overlay_chat.SetVisible(false);lz_overlay_chat.SetFixedMode(true);lz_default_overflow=document.body.style.overflow;document.body.style.position="fixed";document.body.style.overflow="hidden";document.body.style.right=0;document.body.style.left=0;lz_chat_set_meta();setTimeout(function(){lz_chat_set_slide(a);lz_chat_update_css();lz_chat_set_element_width();lz_chat_scoll_down()},1000)}else{lz_overlay_chat.SetVisible(false);lz_chat_restore_meta();document.body.style.position="";document.body.style.overflow=lz_default_overflow;lz_overlay_chat.SetFixedMode(false);lz_chat_set_slide(false)}}function lz_chat_set_slide(a){if(a){lz_overlay_chat.m_FrameElement.style.transform="translateY(+100%)";lz_overlay_chat.m_FrameElement.style["-webkit-transform"]="translateY(+100%)";lz_overlay_chat.SetVisible(true);lz_overlay_chat.m_FrameElement.className="lz_anim_slide_in"}else{lz_overlay_chat.m_FrameElement.style.transform="";lz_overlay_chat.m_FrameElement.style["-webkit-transform"]="";lz_overlay_chat.m_FrameElement.className=""}}function lz_chat_require_leave_message(a){if(a){OverlayChatWidgetV2.__TicketRequired=true}OverlayChatWidgetV2.SetMode("ticket",false)}function lz_overlay_chat_impose_max_length(b,a){if(b.value.length>a){b.value=b.value.substring(0,a)}}function lz_chat_set_meta(){var a=document.getElementsByTagName("meta");if(a.length>0){for(key in a){if(a[key].name=="viewport"&&a[key].id!="lzvpc"){lz_default_meta=a[key];a[key].parentNode.removeChild(a[key])}}}var b=document.createElement("meta");b.name="viewport";b.id="lzvpc";b.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no";document.getElementsByTagName("head")[0].appendChild(b)}function lz_chat_restore_meta(){if(document.getElementById("lzvpc")!=null){document.getElementById("lzvpc").setAttribute("content","");document.getElementsByTagName("head")[0].removeChild(document.getElementById("lzvpc"))}if(lz_default_meta!=null){document.getElementsByTagName("head")[0].appendChild(lz_default_meta)}}function lz_chat_set_application_status(h,c,b,f,g,a,e){if(lz_overlay_chat!=null){var d=(lz_session.OVLWMSElem=="chat");lz_hide_widget_by_conf=h;if(a==0&&lz_chat_status!=a){OverlayChatWidgetV2.__ChatStarted=false}lz_chat_status=a;lz_chat_declined=false;lz_chat_human_available=f;if(lz_operator!=null||lz_chat_connecting){c=true}if(lz_mode_change_details&&c!=d){lz_chat_switch_details(true)}if(!c&&document.getElementById("lz_chat_text").value.length>0&&document.getElementsByName("form_114")[0].value.length==0){document.getElementsByName("form_114")[0].value=document.getElementById("lz_chat_text").value}if(!c&&document.getElementById("lz_chat_queued_posts")!=null){document.getElementById("lz_chat_content_box").removeChild(document.getElementById("lz_chat_queued_posts"))}OverlayChatWidgetV2.ChatAvailable=c;OverlayChatWidgetV2.ValidateMode();lz_chat_update_ui_elements();lz_chat_update_wm_ui();OverlayChatWidgetV2.UpdateEyeCatcherContent()}}function lz_chat_add_wm_elems(b,g,d,f,k){var t=Math.floor(10*OverlayChatWidgetV2.__Ratio);if(lz_ovlel.length==1){return}if(lz_overlay_wm==null&&!OverlayChatWidgetV2.__ModeCombi){var n=(lz_ovlel_fsm)?"auto":OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border;var m=(lz_ovlel_fsm)?"50":(OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)+OverlayChatWidgetV2.__Space;var a=(lz_ovlel_fsm)?"00":"22";lz_overlay_wm=new lz_livebox_v2("lz_overlay_wm",b,n,m+"px",g,0,f,k,a,(lz_ovlel_fsm)?document.getElementById("lz_chat_fs_body"):document.body);lz_overlay_wm.m_MaxHeight=(lz_ovlel_fsm)?m+"px":((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)+OverlayChatWidgetV2.__Space)*lz_ovlel.length;lz_overlay_wm.SetMobile(lz_is_mobile);lz_chat_overlay_pointer=document.getElementById("lz_chat_overlay_pointer_"+((OverlayChatWidgetV2.__ModeSingle)?"v":"h"));if(lz_ovlel_fsm){document.getElementById("lz_chat_overlay_text").style.background=document.getElementById("lz_chat_overlay_text").style.color="#fff";document.getElementById("lz_chat_overlay_text").style.textAlign="right";lz_overlay_wm.m_FrameElement.style.whiteSpace="nowrap";lz_overlay_wm.m_FrameElement.style.overflow="hidden";lz_overlay_wm.m_FrameElement.style.background="#f7f8f9";lz_overlay_wm.m_FrameElement.style.position="absolute"}var o,l,e,q,s,c=document.getElementById("livezilla_wm"),p=document.getElementById("livezilla_wm_d"),r=document.getElementById("livezilla_wm_c");c.style.height=c.style.width=OverlayChatWidgetV2.__Size+"px";var j=lz_overlay_zindex+100;if(lz_is_mobile&&!lz_ovlel_fsm){j-=1000}for(var h=lz_ovlel.length-1;h>=0;h--){o=(lz_ovlel_fsm)?((lz_ovlel.length-1)-h):h;if(lz_ovlel[o]==null){continue}l=(((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)*o)+(OverlayChatWidgetV2.__Space*o));q=null;if(lz_ovlel[o].type!="wm"){e=c.cloneNode(true);e.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_ovlel[o].icon));e.id+="_"+lz_ovlel[o].type;e.style.zIndex=j-o;lz_overlay_wm.m_FrameElement.appendChild(e);q=p.cloneNode(true);q.id+="_"+lz_ovlel[o].type;if(lz_ovlel[o].type!="phone"){q.innerHTML=lz_text_wm[lz_ovlel[o].type]}else{q.innerHTML="";if(lz_ovlel[o].inbound!=false){q.innerHTML+=lz_text_wm.phone_in}if(lz_ovlel[o].inbound!=false&&lz_ovlel[o].outbound!=false){q.innerHTML+=" / "}if(lz_ovlel[o].outbound!=false){q.innerHTML+=lz_text_wm.phone_out}}q.style.marginTop="-"+((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)-t)+"px";if(!lz_ovlel_fsm){q.style.right=(OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)+t+"px"}q.style.borderRadius=lz_border_radius+"px";if(lz_is_mobile&&!lz_ovlel_fsm){q.style.transform="translateY("+l+"px)"}if(typeof lz_ovlel[o].color!="undefined"){q.style.backgroundColor=lz_ovlel[o].color}q.style.zIndex=e.style.zIndex;e.setAttribute("data-did",q.id);e.setAttribute("data-type",lz_ovlel[o].type);if(!lz_ovlel_fsm){e.appendChild(q)}else{lz_overlay_wm.m_FrameElement.appendChild(q)}if(typeof lz_ovlel[o].counter!="undefined"){s=r.cloneNode(true);s.id+="_"+lz_ovlel[o].type;s.style.zIndex=e.style.zIndex+2;e.appendChild(s);if(lz_ovlel_fsm){s.style.top="-45px";s.style.left="55px"}}if(!lz_ovlel_fsm){e.style.top=(OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)*-1+"px"}else{e.style.top=parseInt((m-(OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border))/2)+"px";if(typeof lz_ovlel[o].href=="undefined"){e.style.left=((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border+t)*(o))-(OverlayChatWidgetV2.__Size/1.3)+"px"}else{e.style.right="-1000px"}}if(!lz_ovlel_fsm&&typeof lz_ovlel[o].margin!="undefined"){e.style.marginBottom=lz_ovlel[o].margin[2]+OverlayChatWidgetV2.__Space+"px";lz_overlay_wm.m_MaxHeight+=lz_ovlel[o].margin[2]}else{e.style.marginBottom=OverlayChatWidgetV2.__Space+"px"}if(lz_ovlel[o].type=="phone"){lz_mode_phone_outbound=lz_ovlel[o].outbound!=false;lz_mode_phone_inbound=lz_ovlel[o].inbound!=false;if(lz_mode_phone_inbound){document.getElementById("lz_chat_data_phone_header_number").innerHTML=lz_global_base64_url_decode(lz_ovlel[o].inbound.number);document.getElementById("lz_chat_data_phone_header_text").innerHTML=lz_global_base64_url_decode(lz_ovlel[o].inbound.text)}}if(!lz_ovlel_fsm&&typeof lz_ovlel[o].color!="undefined"){e.style.backgroundColor=lz_ovlel[o].color}else{if(!lz_ovlel_fsm){e.style.borderColor=lz_color_primary_dark}}}else{e=c;e.style.zIndex=j+100;if(!lz_ovlel_fsm){e.style.borderColor=lz_color_primary_dark}}e.setAttribute("data-tid",lz_ovlel[o].type);if(!lz_ovlel_fsm){e.style.transform="translateY("+l+"px)";e.style.borderRadius=Math.min(50,lz_border_radius*t)+"%";e.style.right=0}else{e.style.boxShadow="none";e.style.width="100px";e.style.textAlign="center"}e.style.position=(lz_ovlel_fsm)?"static":"relative";e.style.display=(lz_ovlel_fsm)?"inline-block":"block"}if(lz_ovlel.length){c.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_ovlel[0].icon))}if(!lz_ovlel_fsm){lz_chat_overlay_pointer.style.right=((!OverlayChatWidgetV2.__ModeSingle)?(parseInt(lz_overlay_chat.m_FrameElement.style.marginRight.replace("px",""))-11):(f+(((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)/2)-12)))+"px"}lz_chat_overlay_pointer.style.zIndex=j+1200;lz_overlay_wm.m_FrameElement.style.zIndex=lz_overlay_zindex}}function lz_chat_update_wm_ui(){if(lz_overlay_wm==null){return}var e,d,c,f=document.getElementById("livezilla_wm");lz_overlay_wm.m_FrameElement.style.height=((lz_session.OVLWMState=="0")?(OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border):lz_overlay_wm.m_MaxHeight)+"px";for(var b=lz_ovlel.length-1;b>=0;b--){if(lz_ovlel[b].type!="wm"){d=document.getElementById("livezilla_wm_"+lz_ovlel[b].type);d.style.display=(lz_session.OVLWMState=="0"||OverlayChatWidgetV2.__ModeSingle)?"none":(!lz_overlay_chat.m_FullScreenMode)?"block":"inline-block";if(lz_session.OVLWMSElem==lz_ovlel[b].type){if(lz_overlay_chat.m_FullScreenMode){lz_chat_overlay_pointer.style.left=((((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)*(b))+13)+(b*10))-(OverlayChatWidgetV2.__Size/1.3)+"px";d.style.background=lz_color_primary;d.getElementsByTagName("svg")[0].style.fill="#fff"}else{if(!OverlayChatWidgetV2.__ModeSingle){var a=(((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)*b)+(OverlayChatWidgetV2.__Space*b))+OverlayChatWidgetV2.__Space+(13*OverlayChatWidgetV2.__Ratio);lz_chat_overlay_pointer.style.bottom=a+lz_overlay_wm.m_Margins[2]+"px"}}}else{if(lz_overlay_chat.m_FullScreenMode){d.style.background="#f7f8f9";d.style.borderRight="1px dotted #ddd";d.getElementsByTagName("svg")[0].style.fill="#999"}}e="livezilla_wm_d_"+lz_ovlel[b].type;c=document.getElementById(e);if(!lz_is_mobile&&!lz_overlay_chat.m_FullScreenMode){d.onmouseover=function(){if(this.getAttribute("data-tid")==lz_session.OVLWMSElem){lz_chat_overlay_pointer.style.visibility="hidden"}document.getElementById(this.getAttribute("data-did")).style.display="block";var g=this;if(lz_is_mobile){setTimeout(function(){document.getElementById(g.getAttribute("data-did")).style.display="none"},2000)}};d.onmouseout=function(){lz_chat_overlay_pointer.style.visibility="visible";document.getElementById(this.getAttribute("data-did")).style.display="none"}}else{if(!lz_overlay_chat.m_FullScreenMode){c.style.display=(lz_is_mobile&&lz_session.OVLWMState=="0")?"none":"block";lz_add_class(c,"lz_anim_slide_in")}}lz_add_class(c,"lz_overlay_wm_sh_act")}else{d=f;d.style.top=(lz_session.OVLWMState!="0")?lz_overlay_wm.m_MaxHeight-((OverlayChatWidgetV2.__Size+OverlayChatWidgetV2.__Border)+OverlayChatWidgetV2.__Space)+"px":0;d.style.visibility=(!lz_overlay_chat.m_FullScreenMode)?"visible":"hidden";d.style.display=(!lz_overlay_chat.m_FullScreenMode)?"block":"none";if(OverlayChatWidgetV2.__ModeSingle){if(lz_session.OVLWMSElem=="chat"&&lz_chat_get_wm_element("chat")!=null){d.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_chat_get_wm_element("chat").icon))}else{if(lz_session.OVLWMSElem=="ticket"&&lz_chat_get_wm_element("ticket")!=null){d.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_chat_get_wm_element("ticket").icon))}else{if(lz_ovlel.length>1){d.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_ovlel[1].icon))}else{if(lz_ovlel.length==1){d.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path(lz_ovlel[0].icon))}}}}}else{if(lz_chat_get_wm_element("chat")==null){d.getElementsByTagName("path")[0].setAttribute("d",lz_get_icon_path("question"));d.getElementsByTagName("svg")[0].setAttribute("viewBox",lz_get_icon_v("question"));d.getElementsByTagName("path")[0].setAttribute("transform",lz_get_icon_t("question"))}}}lz_add_class(d,"lz_overlay_wm_button");if(typeof lz_ovlel[b].href!="undefined"){d.onclick=function(g){return function(){lz_chat_open_window(g,true)}}(lz_global_base64_decode(lz_ovlel[b].href))}else{if(lz_ovlel[b].type=="knowledgebase"&&lz_kb_external){d.onclick=function(){lz_chat_pop_out("knowledgebase")}}else{if(lz_ovlel[b].type=="knowledgebase"&&lz_kb_embed){d.onclick=function(){window.location.href=lz_kb_embed_url}}else{if(lz_ovlel[b].type=="wm"&&lz_chats_external){d.onclick=function(){lz_chat_pop_out("chat")}}else{d.onclick=function(){OverlayChatWidgetV2.SetMode(this.getAttribute("data-tid"),true)}}}}}if(lz_ovlel[b].type=="chat"){if(!OverlayChatWidgetV2.ChatAvailable||lz_chat_declined){lz_add_class(d,"lz_chat_disabled")}else{lz_remove_class(d,"lz_chat_disabled")}}if(lz_ovlel[b].type=="ticket"){if(!lz_ticket_when_online&&OverlayChatWidgetV2.ChatAvailable){lz_add_class(d,"lz_chat_disabled")}else{lz_remove_class(d,"lz_chat_disabled")}}lz_add_class(d,"lz_overlay_wm_sh_act");lz_add_class(d,"lz_anim_slide_in")}if(OverlayChatWidgetV2.__ModeSingle){lz_chat_overlay_pointer.style.bottom=(parseInt(lz_overlay_chat.m_FrameElement.style.marginBottom.replace("px",""))-14)+"px"}if(lz_chat_get_wm_element("chat")!=null){if(OverlayChatWidgetV2.__ModeSingle||lz_session.OVLWMState=="0"){lz_overlay_wm.m_FrameElement.appendChild(document.getElementById("livezilla_wm_c_chat"))}else{document.getElementById("livezilla_wm_chat").appendChild(document.getElementById("livezilla_wm_c_chat"))}}if(lz_session.OVLWMSElem=="chat"&&lz_session.OVLWMState=="1"){lz_chat_update_waiting_posts(0)}lz_chat_overlay_pointer.style.display=OverlayChatWidgetV2.__ModeAPI||lz_session.OVLWMSElem==""||lz_session.OVLWMState=="0"||lz_is_mobile||lz_overlay_chat.m_FullScreenMode?"none":"block";if(lz_eye_catcher!=null){lz_eye_catcher.SetVisible(lz_eye_catcher.m_FrameElement.style.opacity>=1&&lz_session.OVLWMState=="0")}}function lz_chat_update_chat_ui(a){if(lz_overlay_chat.m_FullScreenMode||(a&&!lz_overlay_chat.IsVisible())){lz_overlay_chat.SetVisible(true);if(lz_is_mobile&&!lz_overlay_chat.m_FullScreenMode){lz_chat_set_zoom(true,true);OverlayChatWidgetV2.ValidateMode();lz_overlay_wm.SetVisible(false)}}if(!lz_overlay_chat.m_FullScreenMode&&(!a&&lz_overlay_chat.IsVisible())){if(lz_is_mobile&&!lz_overlay_chat.m_FullScreenMode){lz_chat_set_zoom(true,false);lz_overlay_wm.SetVisible(true)}lz_overlay_chat.SetVisible(false)}}function lz_chat_get_wm_element(a){for(var b in lz_ovlel){if(lz_ovlel[b].type==a){return lz_ovlel[b]}}return null}OverlayChatWidgetV2.UpdateChatFunctions=function(){if(lz_chat_data.SelectedGroup==null){return}var b=lz_chat_data.SelectedGroup.ChatFunctions;if(b!=null){var a=lz_chat_id.length&&lz_chat_status==2;document.getElementById("lz_cf_so").style.display=(b!=null&&b[1]=="0")?"none":"block";document.getElementById("lz_cf_pr").style.display=!(b!=null&&b[2]=="0")&&a?"block":"none";if(document.getElementById("lz_chat_feedback_init").style.display!="block"){document.getElementById("lz_chat_feedback_init").style.display=!(b!=null&&b[3]=="0")&&a?"block":"none"}document.getElementById("lz_cf_fu").style.display=!(b!=null&&b[5]=="0")&&a?"block":"none"}};OverlayChatWidgetV2.UpdateEyeCatcherContent=function(){if(lz_ovlec!=null&&!lz_d(lz_ovlec.ec_p)&&document.getElementById("lz_overlay_eyecatcher_avatar")!=null){document.getElementById("lz_overlay_eyecatcher_avatar").style.display="none"}if(document.getElementById("lz_ec_image")!=null){if(OverlayChatWidgetV2.ChatAvailable&&lz_ec_image==""){lz_fade_out(document.getElementById("lz_eye_catcher"),25)}else{if(!OverlayChatWidgetV2.ChatAvailable&&lz_ec_o_image==""){lz_fade_out(document.getElementById("lz_eye_catcher"),25)}else{document.getElementById("lz_ec_image").src=lz_global_base64_url_decode(((OverlayChatWidgetV2.ChatAvailable)?lz_ec_image:lz_ec_o_image))}}}else{if(document.getElementById("lz_ec_header_text")!=null){document.getElementById("lz_ec_header_text").innerHTML=((OverlayChatWidgetV2.ChatAvailable&&lz_chat_get_wm_element("chat")!=null)?lz_ec_header:lz_ec_o_header);document.getElementById("lz_ec_sub_header_text").innerHTML=((OverlayChatWidgetV2.ChatAvailable&&lz_chat_get_wm_element("chat")!=null)?((lz_d(lz_ovlec.ec_p)&&typeof lz_ec_sub_header_p!="undefined")?lz_global_base64_decode(lz_ec_sub_header_p):lz_ec_sub_header):lz_ec_o_sub_header)}}};OverlayChatWidgetV2.ForwardTicket=function(a){if(OverlayChatWidgetV2.OfflineMessageMode==1){if(lz_overlay_chat.m_FullScreenMode||a){window.location.href=OverlayChatWidgetV2.OfflineMessageHTTP;lz_chat_loading(true)}return true}return false};OverlayChatWidgetV2.GetAutoMode=function(){var a="NA";if(!lz_hide_widget_by_conf){if(lz_chat_get_wm_element("phone")!=null){a="phone"}if(lz_chat_get_wm_element("knowledgebase")!=null){a="knowledgebase"}if(OverlayChatWidgetV2.OfflineMessageMode!=1){if(OverlayChatWidgetV2.__ModeCombi||lz_chat_get_wm_element("ticket")!=null){a="ticket"}}if((OverlayChatWidgetV2.__ModeCombi||lz_chat_get_wm_element("chat")!=null)&&(OverlayChatWidgetV2.ChatAvailable!==false||OverlayChatWidgetV2.__ModeBot)&&!lz_chat_declined&&!OverlayChatWidgetV2.__TicketRequired){a="chat"}}return a};OverlayChatWidgetV2.ValidateMode=function(){var a=OverlayChatWidgetV2.GetAutoMode();if(lz_overlay_wm!=null&&!OverlayChatWidgetV2.__ModeAPI){var b=(a!="NA"||lz_chat_get_wm_element("ticket")!=null)&&!lz_overlay_chat.m_FixedMode&&!(lz_overlay_chat.m_FullScreenMode&&OverlayChatWidgetV2.__ModeSingle);lz_overlay_wm.SetVisible(b);if(!b){lz_tracking_add_eye_catcher_v2=function(){}}}if(a=="NA"){lz_overlay_chat.SetVisible(false);if(lz_overlay_chat.m_FullScreenMode){OverlayChatWidgetV2.ForwardTicket(true)}}if(lz_session.OVLWMSElem!=a){if(lz_session.OVLWMSElem=="phone"){return}if(lz_session.OVLWMSElem=="knowledgebase"){return}if(lz_session.OVLWMSElem=="feedback"){return}if(lz_session.OVLWMSElem=="ticket"){if(!lz_ticket_when_online&&OverlayChatWidgetV2.ChatAvailable){OverlayChatWidgetV2.SetMode(a,false);return}if(lz_chat_get_input_value(114)!=""){return}if(!OverlayChatWidgetV2.__ModeSingle){return}}if(lz_session.OVLWMSElem=="chat"){if((lz_chat_status>0||OverlayChatWidgetV2.__ChatStarted)&&!lz_chat_declined){return}}if(!lz_is_mobile||lz_overlay_chat.m_FixedMode){OverlayChatWidgetV2.SetMode(a,false)}}if(lz_session.OVLWMSElem=="chat"&&!OverlayChatWidgetV2.__ModeBot&&lz_chat_data.SelectedGroup!=null&&lz_chat_data.SelectedGroup.Amount==0&&!OverlayChatWidgetV2.__PublicGroupChat.length&&lz_chat_status==0){OverlayChatWidgetV2.SetMode("ticket",false)}else{if(lz_session.OVLWMSElem=="ticket"&&lz_chat_data.SelectedGroup!=null&&lz_chat_data.SelectedGroup.Amount>0&&lz_chat_get_wm_element("ticket")==null){OverlayChatWidgetV2.SetMode("chat",false)}}};OverlayChatWidgetV2.SetMode=function(b,a){var c;if(b=="chat"&&OverlayChatWidgetV2.__TicketRequired&&a){OverlayChatWidgetV2.__TicketRequired=false}if(b=="ticket"&&OverlayChatWidgetV2.ForwardTicket(a)){lz_session.OVLWMSElem="wm";lz_session.OVLWMState="0"}else{lz_chat_switch_options_table(true);if(b==null){b="";if(a&&document.getElementById("lz_chat_invite_id")!=null&&lz_chat_status==0){lz_chat_decline_request(lz_request_active=document.getElementById("lz_chat_invite_id").value,false,false);return}}if(a){OverlayChatWidgetV2.__ModeFeedback=false}if(OverlayChatWidgetV2.__ModeSingle||OverlayChatWidgetV2.__ModeCombi){if(b!="wm"&&b!=""){lz_session.OVLWMSElem=b}else{if(b=="wm"&&!OverlayChatWidgetV2.ChatAvailable&&lz_session.OVLWMSElem=="NA"){OverlayChatWidgetV2.ForwardTicket(a)}}if(a){lz_session.OVLWMState=(lz_session.OVLWMState=="0")?"1":"0"}c=(lz_session.OVLWMState=="1"&&lz_session.OVLWMSElem!=""&&lz_session.OVLWMSElem!="NA")}else{if(b==""){lz_session.OVLWMState="0"}else{if(b=="wm"){lz_session.OVLWMState=(lz_session.OVLWMState=="0")?"1":"0"}}if(b!="wm"){lz_session.OVLWMSElem=b}if(lz_overlay_chat.m_FullScreenMode){lz_session.OVLWMState="1"}if(lz_is_mobile){c=(lz_session.OVLWMState=="1"&&lz_session.OVLWMSElem!=""&&lz_session.OVLWMSElem!="NA"&&b!="wm")}else{c=(lz_session.OVLWMState=="1"&&lz_session.OVLWMSElem!=""&&lz_session.OVLWMSElem!="NA")}}if(a&&!OverlayChatWidgetV2.__ModeSingle){if(b==lz_session.OVLWMSElem&&!lz_overlay_chat.m_FullScreenMode){if(lz_chat_overlay_pointer!=null&&lz_session.OVLWMState!="0"){lz_chat_overlay_pointer.style.visibility="hidden"}}if(b=="knowledgebase"&&document.getElementById("lz_chat_kb_match_info").style.display!="none"){lz_chat_kb_deactivate(false,false)}}}lz_session.Save();lz_chat_update_chat_ui(c);lz_chat_update_wm_ui();lz_chat_update_ui_elements();if(a&&lz_session.OVLWMSElem=="chat"){lz_chat_scoll_down()}};OverlayChatWidgetV2.APIButtonClick=function(a){document.getElementById("lz_chat_text").value=lz_global_base64_decode(a);lz_chat_message(null,null)};